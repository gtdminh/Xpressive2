var Xmpp;(function(n){var t=function(){function t(n){this.jid=n,this.item={},this.fullJid=n,this.show="",this.status="",this.thisIsMe=!1,this.item={},this.fullJid=n,this.capabilities=null,this.show="",this.status="",this.thisIsMe=!1}return Object.defineProperty(t.prototype,"nickname",{get:function(){return Strophe.getResourceFromJid(this.fullJid)},enumerable:!0,configurable:!0}),t.prototype.getStatus=function(){return this.role==="none"?"unavailable":this.status},Object.defineProperty(t.prototype,"affiliation",{get:function(){var n="none";return this.item&&(n=this.item.attr("affiliation")||"none"),n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"role",{get:function(){var n="none";return this.item&&(n=this.item.attr("role")||"none"),n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realJid",{get:function(){return this.item?this.item.attr("jid")||null:null},enumerable:!0,configurable:!0}),t.prototype.isThisMe=function(){return this.thisIsMe},t.prototype.startChat=function(n){var t=Strophe.getResourceFromJid(n)},t.prototype.presenceUpdate=function(n){var t,i,r,u;this.item=n.find("item"),t=n.find("c"),t&&t.length>0&&this.capabilitiesUpdate(t),i=$(n).find("status"),i&&i.length>0&&(this.status=i.text()),r=$(n).find("show"),r&&r.length>0&&(this.show=r.text()),u=$(n).find("x status[code='110']"),u&&u.length>0&&(this.thisIsMe=!0),this.thisIsMe&&$(document).trigger("update_my_room_info",{jid:this.fullJid,affiliation:this.affiliation,role:this.role})},t.prototype.capabilitiesUpdate=function(t){this.capabilities=new n.Capabilities(t)},t.prototype.toString=function(){return"Occupant: Nickname="+this.nickname+", RealJid="+this.realJid+", isThisMe="+this.isThisMe()+", affiliation="+this.affiliation+", role="+this.role+", status="+this.getStatus()+", show="+this.show+". "},t}();n.Occupant=t})(Xmpp||(Xmpp={}))