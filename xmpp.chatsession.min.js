var Xmpp;(function(n){var t=function(){function t(t,i,r,u,f){this.adHoc=!1,this.connection=u,this.chatstates=function(){return this.connection.chatstates},this.chatWith=t,this.name=i,this.resource=r,this.isGroupChat=!1,this.messages=[],f&&this.messages.push(new n.Message(f))}return t.prototype.chatstates=function(){return this.connection.chatstates},t.prototype.sendTopic=function(n){var t=n.tree();return this.connection.send(t),this.connection.flush(),t},t.prototype.sendMessage=function(t,i){var r=this.chatstates().addActive(t).tree();return this.connection.send(r),this.connection.flush(),this.isGroupChat===!1&&this.messages.push(new n.Message(t,i)),r},t.prototype.recvMessage=function(t,i){return this.messages.push(new n.Message(t,i)),t},t.prototype.endChat=function(){this.isGroupChat?this.connection.muc.leave(this.chatWith.jid):this.chatstates().sendGone(this.chatWith.jid)},t}();n.ChatSession=t})(Xmpp||(Xmpp={}))