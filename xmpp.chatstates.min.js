var Xmpp;(function(n){var t=function(){function n(){}return n.prototype.init=function(n){this._connection=n,Strophe.addNamespace("CHATSTATES","http://jabber.org/protocol/chatstates")},n.prototype.statusChanged=function(n){(n===Strophe.Status.CONNECTED||n===Strophe.Status.ATTACHED)&&this._connection.disco.addFeature(Strophe.NS.CHATSTATES)},n.prototype.addActive=function(n){return n.c("active",{xmlns:Strophe.NS.CHATSTATES}).up()},n.checkForNotification=function(n){var t=$(n).find("composing"),i=$(n).find("paused"),r=$(n).find("active"),u=$(n).find("gone"),f=$(n).attr("from");return t.length>0?"composing":i.length>0?"paused":r.length>0?"active":u.length>0?"gone":null},n.prototype.sendActive=function(n,t){this._sendNotification(n,t,"active")},n.prototype.sendComposing=function(n,t){this._sendNotification(n,t,"composing")},n.prototype.sendPaused=function(n,t){this._sendNotification(n,t,"paused")},n.prototype.sendGone=function(n,t){this._sendNotification(n,t,"gone")},n.prototype._sendNotification=function(n,t,i){t||(t="chat"),this._connection.send($msg({to:n,type:t}).c(i,{xmlns:Strophe.NS.CHATSTATES}))},n}();n.Chatstates=t})(Xmpp||(Xmpp={})),Strophe.addConnectionPlugin("chatstates",function(){var n=new Xmpp.Chatstates;return{init:function(t){return n.init(t)},statusChanged:function(t){return n.statusChanged(t)},addActive:function(t){return n.addActive(t)},sendActive:function(t,i){return n.sendActive(t,i)},sendComposing:function(t,i){return n.sendComposing(t,i)},sendPaused:function(t,i){return n.sendPaused(t,i)},sendGone:function(t,i){return n.sendGone(t,i)}}}())